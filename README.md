# üöÄ RBDNTI - –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π –±–∞–Ω–∫ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—É—á–Ω–æ-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#-–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–°–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º)](#-—Å–µ—Ä–≤–µ—Ä-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏-—Å-–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º)
- [–°–µ—Ä–≤–µ—Ä –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)](#-—Å–µ—Ä–≤–µ—Ä-–ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞-–ø–µ—Ä–≤—ã–π-–∑–∞–ø—É—Å–∫-–±–µ–∑-–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)
- [–°–µ—Ä–≤–µ—Ä –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)](#-—Å–µ—Ä–≤–µ—Ä-–ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–±–µ–∑-–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)
- [–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#-—á–∞—Å—Ç–æ-–∑–∞–¥–∞–≤–∞–µ–º—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)

---

## üèóÔ∏è –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**–†–ë–î–ù–¢–ò** - —ç—Ç–æ Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç—è–º–∏ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker, Gunicorn –∏ Nginx.

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Django**   - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Gunicorn** - WSGI —Å–µ—Ä–≤–µ—Ä
- **Nginx**    - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ –ø—Ä–æ–∫—Å–∏
- **SQLite**   - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Docker**   - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
backend/                          # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ Django
‚îú‚îÄ‚îÄ Dockerfile                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –±—ç–∫–µ–Ω–¥–∞
‚îú‚îÄ‚îÄ requirements.txt              # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ rbdnti/                       # –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç Django
    ‚îú‚îÄ‚îÄ data/                     # –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    ‚îÇ   ‚îú‚îÄ‚îÄ db/                   # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
    ‚îÇ   ‚îú‚îÄ‚îÄ media/                # –ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã (–∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏)
    ‚îÇ   ‚îî‚îÄ‚îÄ staticfiles/          # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (—Å–æ–±—Ä–∞–Ω–Ω—ã–µ)
    ‚îú‚îÄ‚îÄ news_site/                # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–Ω–æ–≥–æ —Å–∞–π—Ç–∞
    ‚îî‚îÄ‚îÄ rbdnti/                   # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ Django
nginx/                            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx
manage.sh                         # –°–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
.env                              # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

### –°–µ—Ç–µ–≤—ã–µ –ø–æ—Ä—Ç—ã
- **80** - Nginx (–¥–æ—Å—Ç—É–ø –∫ —Å–∞–π—Ç—É)
- **8000** - Gunicorn (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)

---

## üíª –°–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º)
### –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç
```bash
git clone https://github.com/panch0us/rbdnti
cd rbdnti
```
### ‚öôÔ∏è –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞  (rbdnti/.env)
```bash
SECRET_KEY=–£–ö–ê–ó–ê–¢–¨-–°–í–û–ô
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1
```
### üü¢ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
./manage.sh dev
```
### üìä –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```bash
./manage.sh logs
```
### üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ 20 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
```bash
docker compose -f docker-compose.dev.yml logs web --tail=20
```
### üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker compose -f docker-compose.dev.yml ps
```
### üë§ –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
```bash
docker compose -f docker-compose.dev.yml exec web python /app/rbdnti/manage.py createsuperuser
```
### üë§ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
./manage.sh makemigrations
```
### üë§ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ –±–∞–∑–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
./manage.sh migrate
```
### üî¥ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
```bash
./manage.sh stop
```
### üßπ –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ: –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —É–¥–∞–ª—è–µ—Ç –∏—Ö –∏ –æ—á–∏—â–∞–µ—Ç –Ω–µ–Ω—É–∂–Ω—ã–µ –æ–±—Ä–∞–∑—ã):
```bash
./manage.sh clean
```
### –°–æ–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–¥ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
```bash
./manage.sh build
```
### –°–æ–±—Ä–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–ø–∞–∫–µ—Ç —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ):
```bash
./manage.sh package-offline [--include-data]
```

---

## üíª –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)
### –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∞—Ä—Ö–∏–≤ –≤ –ª—é–±–æ–µ —É–¥–æ–±–Ω–æ–µ –º–µ—Å—Ç–æ 
```bash
tar -xzf rbdnti-offline-YYYYMMDD.tar.gz
```
### –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≤ –Ω—É–∂–Ω—É—é –≤–µ—Ä—Å–∏—é
```bash
mv rbdnti-offline-package rbdnti-v1
```
### –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ 
```bash
cd rbdnti-v1
./deploy.sh
```
### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –ª–æ–≥–∏:
```bash
docker compose ps
docker compose logs web -f
```

---

## üîÑ –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)
### –ù–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–µ—Ä–≤–µ—Ä–µ —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ—Ñ—Ñ–ª–∞–π–Ω-–ø–∞–∫–µ—Ç:
```bash
./manage.sh package-offline [--include-data]
```
### –ö–æ–ø–∏—Ä—É–µ–º –∞—Ä—Ö–∏–≤ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
```bash
tar -xzf rbdnti-offline-YYYYMMDD.tar.gz
mv rbdnti-offline-package rbdnti-v2
```
### –ö–æ–ø–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ (–µ—Å–ª–∏ manage.sh package-offline –∑–∞–ø—É—â–µ–Ω –±–µ–∑ --include-data):
```bash
cp -r rbdnti-v1/data rbdnti-v2/
```
### –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (—Å–æ–∑–¥–∞—ë—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è data –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏)
```bash
cd rbdnti-v2
./update.sh
```
### –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é:
```bash
rm -rf rbdnti-v1
```

---

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
### üü¢ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
docker compose up -d
```
### üìä –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker compose ps
```
### üìã –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
docker compose logs web -f
```
### üë§ –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
docker compose exec web python /app/rbdnti/manage.py createsuperuser
```
### üî¥ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
docker compose down
```
### üì¶ –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –¥–∞–Ω–Ω—ã—Ö:
```bash
tar -czf backup_$(date +%Y%m%d).tar.gz data/
```
### üõü –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
```bash
docker compose down
tar -xzf backup_20241111.tar.gz
docker compose up -d
```

---

## ‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã
### –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π?
```bash
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: data/db/db.sqlite3
–ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã: data/media/
–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã: data/staticfiles/
```
### –ö–∞–∫ —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞?
```bash
docker compose exec web python /app/rbdnti/manage.py changepassword username
```
### –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –∑–∞–±—ã–ª –ø–∞—Ä–æ–ª—å –æ—Ç –∞–¥–º–∏–Ω–∫–∏? - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
docker compose exec web python /app/rbdnti/manage.py createsuperuser
```
### –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å?
```bash
docker compose logs web --since 1h
```
### –ö–∞–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å?
```bash
docker compose restart web
# –∏–ª–∏
docker compose restart nginx
```