{% extends "news_site/base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - –†–ë–î –ù–¢–ò –£–ú–í–î –†–æ—Å—Å–∏–∏ –ø–æ –ë—Ä—è–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏{% endblock %}

{% block content %}
<section>
    <div class="sections-grid">
        {% for section in sections %}
        <a href="{% url 'news_site:section' section.slug %}" class="section-card">
            <h3>{{ section.title }}</h3>
            {% if section.description %}
            <div class="section-description">{{ section.description }}</div>
            {% else %}
            <div class="section-description">–î–æ—Å—Ç—É–ø –∫ –Ω–∞—É—á–Ω–æ-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º</div>
            {% endif %}
            <div class="section-meta">
                –ö–∞—Ç–µ–≥–æ—Ä–∏–π: {{ section.categories.count }} | 
                –ù–æ–≤–æ—Å—Ç–µ–π: {{ section.news.count }}
            </div>
        </a>
        {% empty %}
        <div class="section-card">
            <h3>–†–∞–∑–¥–µ–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
            <div class="section-description">–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Ä–∞–∑–¥–µ–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è</div>
        </div>
        {% endfor %}
    </div>
</section>

<section class="news-section">
    <h2 class="section-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</h2>
    <div class="news-list">
        {% for news_item in latest_news %}
        <div class="news-item">
            <div class="news-header">
                <h3 class="news-title">
                    <a href="{% url 'news_site:news_detail' news_item.id %}">{{ news_item.title }}</a>
                </h3>
                <div class="news-date">{{ news_item.created_at|date:"d.m.Y H:i" }}</div>
            </div>
            
            <div class="news-path">
                –†–∞–∑–¥–µ–ª: 
                <a href="{% url 'news_site:section' news_item.section.slug %}">{{ news_item.section.title }}</a>
                {% if news_item.category %}
                ‚Üí 
                <a href="{% url 'news_site:category' news_item.section.slug news_item.category.get_path %}">
                    {{ news_item.category.get_full_path }}
                </a>
                {% endif %}
            </div>
            
            {% if news_item.files.all %}
            <div class="news-files">
                {% for file in news_item.files.all %}
                <a href="{% url 'news_site:tracked_download' file.id %}" class="file-badge">
                    üìé {{ file.filename }}
                </a>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        {% empty %}
        <div class="news-item">
            <p>–ü–æ–∫–∞ –Ω–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π. –ù–æ–≤–æ—Å—Ç–∏ –ø–æ—è–≤—è—Ç—Å—è –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤ —Ä–∞–∑–¥–µ–ª—ã.</p>
        </div>
        {% endfor %}
    </div>
        <!-- ‚úÖ –î–æ–±–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –∞—Ä—Ö–∏–≤ -->
    {% if latest_news %}
    <div class="archive-link-section">
        <a href="{% url 'news_site:news_archive' %}" class="archive-link">
            üìö –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞—Ä—Ö–∏–≤ –≤—Å–µ—Ö –Ω–æ–≤–æ—Å—Ç–µ–π ‚Üí
        </a>
    </div>
    {% endif %}
</section>
{% endblock %}