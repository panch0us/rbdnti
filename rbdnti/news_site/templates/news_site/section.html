{% extends "news_site/base.html" %}

{% block title %}{{ section.title }} - –†–ë–î –ù–¢–ò{% endblock %}

{% block content %}
<!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
<nav class="breadcrumb">
    <a href="{% url 'news_site:index' %}">–ì–ª–∞–≤–Ω–∞—è</a> 
    <span style="margin: 0 10px;">/</span>
    <span>{{ section.title }}</span>
</nav>

<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–∞–∑–¥–µ–ª–∞ -->
<h1 class="section-title">{{ section.title }}</h1>

<!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
<div class="category-tree">
    <h3 style="margin-bottom: 20px; color: var(--primary-color);">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
    
    {% for category in categories %}
    <div class="category-item">
        <a href="{% url 'news_site:category' section.slug category.get_path %}" class="category-link">
            <div class="category-header">
                <h4 class="category-title">{{ category.title }}</h4>
                <div class="category-meta">
                    –ù–æ–≤–æ—Å—Ç–µ–π: {{ category.news.count }}
                </div>
            </div>
            <div class="category-description">
                –ü–æ–ª–Ω—ã–π –ø—É—Ç—å: {{ category.get_full_path }}
            </div>
        </a>
    </div>
    {% empty %}
    <div class="category-item">
        <p>–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –ø–æ–∫–∞ –Ω–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π.</p>
    </div>
    {% endfor %}
</div>

<!-- –ù–æ–≤–æ—Å—Ç–∏ —Ä–∞–∑–¥–µ–ª–∞ -->
{% if news %}
<div class="news-section">
    <h3 style="margin-bottom: 20px; color: var(--primary-color);">–ù–æ–≤–æ—Å—Ç–∏ —Ä–∞–∑–¥–µ–ª–∞</h3>
    <div class="news-list">
        {% for news_item in news %}
        <div class="news-item">
            <div class="news-header">
                <h4 class="news-title">
                    <a href="{% url 'news_site:news_detail' news_item.id %}" style="color: inherit; text-decoration: none;">
                        {{ news_item.title }}
                    </a>
                </h4>
                <div class="news-date">{{ news_item.created_at|date:"d.m.Y H:i" }}</div>
            </div>
            
            {% if news_item.files.all %}
            <div class="news-files">
                {% for file in news_item.files.all %}
                <a href="{% url 'news_site:tracked_download' file.id %}" 
                    class="file-badge">
                    üìé {{ file.filename }}
                </a>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endblock %}